"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0});var EventEmitter=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,e),this.map={},this.suspended=1==t}return _createClass(e,[{key:"addListener",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof t&&!(t instanceof String)&&t!==e.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if("function"!=typeof n)throw new TypeError("The callback must be a function.");var r={context:this,remaining:1/0,data:void 0,duration:1/0,prepend:!1};i=Object.assign({},r,i);var a=new Listener(t,this,n,i);return i.duration!==1/0&&setTimeout(function(){return a.remove()},i.duration),this.map[t]||(this.map[t]=[]),i.prepend?this.map[t].unshift(a):this.map[t].push(a),a}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.addListener(e,t,n)}},{key:"once",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.remaining=1,this.addListener(e,t,n)}},{key:"hasListener",value:function(e){return!!(this.map[e]&&this.map[e].length>0)}},{key:"getListeners",value:function(e){return this.map[e]||[]}},{key:"suspend",value:function(e){this.getListeners(e).forEach(function(e){e.suspended=!0})}},{key:"unsuspend",value:function(e){this.getListeners(e).forEach(function(e){e.suspended=!1})}},{key:"getListenerCount",value:function(e){return this.getListeners(e).length}},{key:"emit",value:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if("string"!=typeof t&&!(t instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(!this.suspended){var a=[],s=this.map[e.ANY_EVENT]||[];return this.map[t]&&(s=s.concat(this.map[t])),s.forEach(function(e){if(!e.suspended){var t;if(e.remaining>0)a.push((t=e.callback).call.apply(t,[e.context].concat(i,[e.data]))),e.count++;--e.remaining<1&&e.remove()}}),a}}},{key:"removeListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){if(this.map[e]){var i=this.map[e].filter(function(e){return t&&e.callback!==t||n.remaining&&n.remaining!==e.remaining||n.context&&n.context!==e.context});i.length?this.map[e]=i:delete this.map[e]}}else this.map={}}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.removeListener(e,t,n)}},{key:"eventNames",get:function(){return Object.keys(this.map)}},{key:"eventCount",get:function(){return Object.keys(this.map).length}}],[{key:"ANY_EVENT",get:function(){return Symbol.for("Any event")}}]),e}(),Listener=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(_classCallCheck(this,e),"string"!=typeof t&&!(t instanceof String)&&t!==EventEmitter.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if("function"!=typeof i)throw new TypeError("The 'callback' must be a function.");var a={context:this,remaining:1/0,data:void 0};r=Object.assign({},a,r),this.event=t,this.target=n,this.callback=i,this.context=r.context,this.remaining=parseInt(r.remaining)>=1?parseInt(r.remaining):1/0,this.count=0,this.data=r.data,this.suspended=!1}return _createClass(e,[{key:"remove",value:function(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}]),e}();exports.EventEmitter=EventEmitter,exports.Listener=Listener;
//# sourceMappingURL=djipevents.cjs.min.js.map

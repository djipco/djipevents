"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0});var EventEmitter=function(){function t(){_classCallCheck(this,t),this.map={},this.suspended=!1}return _createClass(t,[{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("function"!=typeof e)throw new TypeError("The callback must be a function");var i={context:this,count:1/0,data:void 0,duration:1/0,prepend:!1};n=Object.assign({},i,n);var s=new Listener(t,this,e,n);return n.duration!==1/0&&setTimeout(function(){return s.remove()},n.duration),this.map[t]||(this.map[t]=[]),n.prepend?this.map[t].unshift(s):this.map[t].push(s),s}},{key:"once",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.count=1,this.on(t,e,n)}},{key:"hasListener",value:function(t){return!!(this.map[t]&&this.map[t].length>0)}},{key:"getListeners",value:function(t){return this.map[t]||[]}},{key:"suspend",value:function(t){this.getListeners(t).forEach(function(t){t.suspended=!0})}},{key:"unsuspend",value:function(t){this.getListeners(t).forEach(function(t){t.suspended=!1})}},{key:"getListenerCount",value:function(t){return this.getListeners(t).length}},{key:"emit",value:function(e,n){if(this.map[e]&&!this.suspended){var i=[],s=this.map[t.ANY_EVENT]||[];return this.map[e]&&(s=s.concat(this.map[e])),s.forEach(function(t){t.suspended||(t.count>0&&(void 0!==n?i.push(t.callback.call(t.context,n,t.data)):i.push(t.callback.call(t.context,t.data))),--t.count<1&&t.remove())}),i}}},{key:"off",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t){if(this.map[t]){var i=this.map[t].filter(function(t){return e&&t.callback!==e||n.count&&n.count!==t.count||n.context&&n.context!==t.context});i.length?this.map[t]=i:delete this.map[t]}}else this.map={}}},{key:"eventNames",get:function(){return Object.keys(this.map)}},{key:"eventCount",get:function(){return Object.keys(this.map).length}}],[{key:"ANY_EVENT",get:function(){return Symbol.for("Any event")}}]),t}(),Listener=function(){function t(e,n,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_classCallCheck(this,t);var a={context:this,count:1/0,data:void 0};s=Object.assign({},a,s),this.event=e,this.target=n,this.callback=i,this.context=s.context,this.count=s.count,this.data=s.data,this.suspended=!1}return _createClass(t,[{key:"remove",value:function(){this.target.off(this.event,this.callback,{context:this.context,count:this.count})}}]),t}();exports.EventEmitter=EventEmitter,exports.Listener=Listener;
//# sourceMappingURL=djipevents.cjs.min.js.map

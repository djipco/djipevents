export default class EventEmitter{constructor(){this.events={},this.suspended=!1}on(e,t,s,n,i){if("function"!=typeof t)throw new TypeError("The callback must be a function");let h=new Listener(e,this,t,s,n,i);return this.events[e]||(this.events[e]=[]),this.events[e].push(h),h}hasListener(e){return!!(this.events[e]&&this.events[e].length>0)}get eventNames(){return Object.keys(this.events)}getListeners(e){return this.events[e]||[]}suspend(e){this.getListeners(e).forEach(e=>{e.suspended=!0})}unsuspend(e){this.getListeners(e).forEach(e=>{e.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,t){this.events[e]&&!this.suspended&&this.events[e].forEach(e=>{e.suspended||(t?e.callback.call(e.context,t,e.data):e.callback.call(e.context,e.data),e.once&&e.remove())})}once(e,t,s,n){return this.on(e,t,s,!0,n)}off(e,t,s,n){if(!this.events[e])return;let i=this.events[e].filter(e=>t&&e.callback!==t||n&&!e.once||s&&s!==e.context);i.length?this.events[e]=i:delete this.events[e]}removeAllListeners(){this.events={}}get eventCount(){return Object.keys(this.events).length}}export class Listener{constructor(e,t,s,n,i,h){this.event=e,this.target=t,this.callback=s,this.context=n,this.once=1==i||!1,this.data=h,this.suspended=!1}remove(){this.target.off(this.event,this.callback,this.context,this.once)}}